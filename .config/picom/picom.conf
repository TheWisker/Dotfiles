# <=========================================>

#   ██████╗ ██╗ ██████╗ ██████╗ ███╗   ███╗
#   ██╔══██╗██║██╔════╝██╔═══██╗████╗ ████║
#   ██████╔╝██║██║     ██║   ██║██╔████╔██║
#   ██╔═══╝ ██║██║     ██║   ██║██║╚██╔╝██║
#   ██║     ██║╚██████╗╚██████╔╝██║ ╚═╝ ██║
#   ╚═╝     ╚═╝ ╚═════╝ ╚═════╝ ╚═╝     ╚═╝

# <=========================================>
#             @Author: TheWisker
# <=========================================>
#                   BACKEND
# <=========================================>
backend = "glx";
# <=========================================>
#                   SHADOWS
# <=========================================>
shadow = true;
shadow-radius = 12;
shadow-opacity = 0.75;
shadow-offset-x = -15;
shadow-offset-y = -15;
shadow-color = "#6D55D2";

#shadow-red = 0.0; (SUPERSEDED) -> shadow-color
#shadow-green = 0.0; (SUPERSEDED) -> shadow-color
#shadow-blue = 0.0; (SUPERSEDED) -> shadow-color
# <=========================================>
#                   CORNER
# <=========================================>
corner-radius = 12;
# <=========================================>
#                    BLUR
# <=========================================>
# (none, gaussian, box, kernel, dual_kawase)
blur-method = "dual_kawase";

#blur-background = true;
blur-background-frame = true;
#blur-background-fixed = false;

# (dual_kawase)
blur-strength = 2;

# (gaussian)
#blur-size = 3;
#blur-deviation = 0.84089642;

# (kernel)
#blur-kern
# <=========================================>
#                   FADING
# <=========================================>
fading = false;

#fade-delta = 10;
#fade-in-step = 0.028;
#fade-out-step = 0.03;

#no-fading-openclose = false;
#no-fading-destroyed-argb = false;
# <=========================================>
#                 UNREDIRECT
# <=========================================>
unredir-if-possible = true;
unredir-if-possible-delay = 1000;
# <=========================================>
#                   DETECT
# <=========================================>
detect-transient = true;
detect-client-opacity = true;
detect-client-leader = false;
detect-rounded-corners = true;

use-ewmh-active-win = true;
#no-ewmh-fullscreen = false;
# <=========================================>
#                   GRAPHIC
# <=========================================>
vsync = true;

no-use-damage = false;
dithered-present = true;

glx-no-stencil = true;
xrender-sync-fence = true;
glx-no-rebind-pixmap = true;

crop-shadow-to-monitor = true;

#resize-damage = 0; (NEEDS) -> legacy-backends
#max-brightness = 1.0; (NEEDS) -> no-use-damage
#force-win-blend = false;
#no-frame-pacing = false;
#glx-fshader-win = SHADER; (NEEDS) -> legacy-backends
#transparent-clipping = false;
# <=========================================>
#                  BEHAVIOUR
# <=========================================>
dbus = true;

#log-file = ~/.cache/picom/log;
#write-pid-path = ~/.cache/picom/pid;

#legacy-backends = false;
# <=========================================>
#                   SHADER
# <=========================================>
#window-shader-fg = SHADER; (NEEDS) -> !legacy-backends
# <=========================================>
#                 (IN)ACTIVE
# <=========================================>
#frame-opacity = 1.0;
#inactive-dim = 0.0; (DISCOURAGED) -> WINDOW_RULES
#active-opacity = 1.0; (DISCOURAGED) -> WINDOW_RULES
#inactive-opacity = 1.0; (DISCOURAGED) -> WINDOW_RULES
#inactive-dim-fixed = false;
#inactive-opacity-override = false; (DISCOURAGED) -> WINDOW_RULES
# <=========================================>
#                   EXCLUDE
# <=========================================>
#fade-exclude = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#focus-exclude = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#shadow-exclude = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#rounded-corners-exclude = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#blur-background-exclude = CONDITION;
#unredir-if-possible-exclude = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#transparent-clipping-exclude = CONDITION;
# <=========================================>
#                 FLAG RULES
# <=========================================>
#opacity-rule = OPACITY:CONDITION; (DISCOURAGED) -> WINDOW_RULES
#corner-radius-rules = RADIUS:CONDITION; (DISCOURAGED) -> WINDOW_RULES
#window-shader-fg-rule = SHADER:CONDITION; (NEEDS) -> !legacy-backends
# <=========================================>
#                   FOCUSED
# <=========================================>
#mark-wmwin-focused = false; (DISCOURAGED) -> WINDOW_RULES
#mark-ovredir-focused = false; (DISCOURAGED) -> WINDOW_RULES
# <=========================================>
#                    EXTRA
# <=========================================>
#clip-shadow-above = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#invert-color-include = CONDITION; (DISCOURAGED) -> WINDOW_RULES
#shadow-ignore-shaped = false; (DEPRECATED)
# <=========================================>
#                    RULES
# <=========================================>
rules = (
    {
        dim = 0;
        opacity = 1;
        fade = false;
        shadow = false;
        corner-radius = 0;
        full-shadow = false;
        blur-background = false;
        transparent-clipping = false;
    },
    {
        match = "window_type *?= 'normal'";

        shadow = false;
        full-shadow = false;
        blur-background = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show", "geometry"];
                preset = "appear";
                scale = 0.6;
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide", "geometry"];
                preset = "disappear";
                scale = 0.6;
                duration = 0.2;
            },
            {
                triggers = ["geometry"];
                preset = "geometry-change";
                saved-image-blend = 0.8;
                duration = 0.2;
            }
        )
    },
    {
        match = "(focused = 0) && window_type *?= 'normal'";

        dim = 0.2;
        opacity = 0.7;
        shadow-color = "#FF0000";
    },
    {
        match = "focused && window_type *?= 'normal'";

        dim = 0;
        opacity = 0.9;
        shadow-color = "#FF0000";
    },
    {
        match = "fullscreen && window_type *?= 'normal'";

        opacity = 0.9;
        shadow = false;
        corner-radius = 0;
        transparent-clipping = true;
    },
    {
        match = "focused && fullscreen && window_type *?= 'normal'";

        opacity = 0.95;
        shadow-color = "#6D55D2";
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'splash'";

        corner-radius = 0;
        transparent-clipping = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "appear";
                scale = 0.75;
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "disappear";
                scale = 0.75;
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'tooltip'";

        blur-background = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "appear";
                scale = 0.85;
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "disappear";
                scale = 0.85;
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'notification'";

        blur-background = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "fly-in";
                direction = "left";
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "fly-out";
                direction = "right";
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'popup_menu'";

        blur-background = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "slide-in";
                direction = "down";
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "slide-out";
                direction = "down";
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'popup_menu' && x <= 192";

        blur-background = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "fly-in";
                direction = "left";
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "fly-out";
                direction = "left";
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'awesome' && window_type *?= 'dock'";

        blur-background = true;
        clip-shadow-above = true;
        transparent-clipping = true;

        animations = (
            {
                triggers = ["open", "show"];
                suppressions = ["open", "show"];
                preset = "slide-in";
                direction = "up";
                duration = 0.2;
            },
            {
                triggers = ["close", "hide"];
                suppressions = ["close", "hide"];
                preset = "slide-out";
                direction = "down";
                duration = 0.2;
            }
        )
    },
    {
        match = "class_i *?= 'rofi'";
        
        dim = 0;
        opacity = 0.85;
        shadow = false;
        corner-radius = 0;
        full-shadow = false;
        blur-background = true;
        transparent-clipping = false;
    }
    
    #{
        #match = "class *?= 'kitty'";

        #shader = "/home/wisker/Downloads/picom-shaders-main/Artistic/chromatic_aberration.glsl";
    #}
)
